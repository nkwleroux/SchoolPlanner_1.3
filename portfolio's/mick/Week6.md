Deze week zijn we van start gegaan met het maken van de pathfinding van de NPC's. Dit ging vrij vloeiend omdat we de distancemap al werkend hadden. Deze pathfinding was echter alleen nog naar het midden van een lokaal, maar het was een mooi begin.

Hierna zijn de taken een beetje opgesplitst. Zelf was ik vooral aan de slag gegaan met het maken van de SpriteController en SpriteSet klassen. Deze zorgden er in essentie voor dat vanuit deze klassen een spriteset ingeladen kan worden en geupdate kan worden vanuit de NPC in samenwerking met de pathfinding. De SpriteController bevat een update functie welke simpelweg kijkt naar welke richting de npc loopt, welk type sprite(idle of walking) en de setnummer. We hebben de beslissing genomen om een algemeen object te maken van de controller zodat alle NPC's datzelfde object kunnen gebruiken in plaats van dat ze elk een eigen controller moeten maken.

Nadat deze klassen afgemaakt waren ben ik samen met Wouter aan de slag gegaan met het inladen van de SpriteSets. Nadat dit successful werkte door middel van dezelfde techniek welke we gebruiken in de maploader, werkte de animate van de sprites direct nadat deze aangeroepen werden door middel van pathfinding.

De dag hierna ben ik samen met Stijn aan de slag gegaan met het integreren van het tijdsverloop en de specefieke uitdeling van de stoelen. Uiteindelijk hebben we gekozen om de stoelen aparte gebieden toe te kennen in de map omdat dit het makkelijkst in te laden was en te koppelen. Hiernaast zijn we aan de slag gegaan met het inbouwen van het tijdsverloop. Initieel was gekozen om de calendar mee te geven aan de animatie, maar tijdens de verdere integratie heb ik hier tegen geadviseerd omdat de simulatie enkel 1 schedule nodig heeft en nooit meerdere.

Na de integratie van de schedule was de koppeling naar de lessen eenvoudig toe te voegen en door middel van een timer konden we een buffer maken om tijdsverloop te simuleren. Deze buffer kunnen we verkleinen of vergroten en hebben hier ook in de gui een mogenlijkheid voor toe gevoegd om deze aan te passen, waardoor de tijd sneller of langzamer verloopt.

Hierna ben ik ten eerste samen met stijn aan de slag gegaan met de pathfinding naar de specefieke stoelen. Dit bleek een grotere uitdaging dan wij ten eerste voor over hadden. Samen kwamen we tot het punt dat een eerste groep goed kon navigeren naar een kamer, maar een tweede niet meer. De dag daarna heb ik dit zelf verder opgelost door een mogelijk toe te passen dat de kamer zijn reservaties onthoudt en kan vrijgeven of reserveren voor een NPC. Nadat ik dit aandachtig heb getest, waren alle problemen hiermee opgelost.